-------------------- Préambule --------------------
Je fais mon stage à Influactive, une entreprise située sur Vaise et spécialisée dans la communication digitale.
M. Bigal le PDG était venu à l'IUT pour tenir une conference sur les projets web.
À la fin de la conférence il nous avait indiqué qu'ils cherchaient un stagiaire pour du PHP.
Voulant effectuer mon stage dans ce domaine, j'avais sauté sur l'occasion.
J'ai été accepté sans entretien et j'ai rapidement fait les papiers.
Je suis allé les donner sur place à la fin de mon S3 et j'ai pu découvrir les lieux.
J'avais pas mal discuté avec mes futurs collègues (Sébastien et François) sur les technologies utilisées dans l'idée de commencer à me former dessus.
Au final je me suis concentré sur mon S4 mais j'ai eu le temps de me familiariser avec WordPress pour le projet de Com.

-------------------- Déroulement du stage --------------------
→ Semaine 1, jour 1
Je suis arrivé dans les premiers (à 9h05). Mon collègue Sébastien était déjà là. Je me suis installé sur un PC qui n'avait pas servi depuis un certain temps. Quelques minutes plus tard François est arrivé. J'ai passé une grosse partie de la matinée à "nettoyer" mon ordinateur et à y installer les logiciels dont j'avais besoin (275 Go de fichiers temporaires quand même !). J'avais la chance d'être très libre en ce qui concerne mes outils de travail et l'entretien de l'ordinateur. J'ai installé Visual Studio Code (le fameux éditeur de code / IDE open-source), ainsi que CCleaner et Glary Utilities pour nettoyer l'ordinateur.
J'ai eu quelques difficultés à me servir de ma boite mail Influactive car il a fallu la rediriger sur une boite Gmail et ça a pris un certain temps. En plus l'envoi des mails est lent (il faut compter 1 à 3 minutes entre l'envoi et la réception), mes collègues ont fini par utiliser Google Hangouts (le chat Gmail) pour m'envoyer les liens et informations dont j'avais besoin.
On m'a confié une mission : effectuer l'intégration d'un site de A à Z, sous TYPO3 9.5 (CMS très complexe et premier projet de la boite sur cette version 9.5 car elle était très rescente). Concrètement, j'avais un montage photo du résultat attendu (la maquette validée par le service communication / ergonomie) et je devais créer le site correspondant. Je devais travailler sur un serveur distant pour être en PHP-7. Je me suis connecté en lignes de commande sur le serveur pour y intaller le projet TYPO3, puis je me suis connecté avec FileZilla pour pouvoir modifier les fichier sur vs-code. J'ai cependant du attendre un certain temps avant de pouvoir utiliser le CMS car l'URL du site ne fonctionnait pas. François a passé un bon moment à régler le problème. Pendant ce temps là je me suis occupé de l'ordinateur, au final je n'ai pas perdu de temps. TYPO3 est difficile à prendre en main, il y a beaucoup de menus, d'options et de paramètres qu'il faut savoir utiliser et la documentation manque souvent de précisions. J'ai été stoppé pendant un moment sur un problème de langue du site, puis sur l'ajout des typo-cripts aux pages, sans quoi elle ne peuvent pas charger. Ma journée s'est terminée sur une introduction au typo-script faite par François.

→ Semaine 1, jour 2
J'ai commencé par faire un point avec mes collègues sur la façon de travailler sur ce projet. Sachant que Fred, le responsable du design, était absent pour encore deux jours, on m'a demandé de me concentrer sur la réalisation de la maquette du site en HTML/CSS. Cette partie s'appelle l'intégration de la maquette. Une fois que ça serait fini je pourrais apprendre à faire le lien entre le front-end (la maquette intégrée) et le front-end (TYPO3 / TypoScript). J'ai appris que le projet sur lequel je travaillais était sur un budjet de 19k€ (juste un site vitrine). Mes collègues m'ont indiqué qu'eux en aurait pour environ deux semaines, et que je mettrais plutôt un mois avec le temps de formation.
J'ai commencé par faire le fichier HTML, j'y ai ajouté le contenu petit à petit de façon structurée. Je n'avais qu'une image comme modele donc pour simuler le site final en attendant d'avoir les images sources, j'ai découpé les morceaux d'images dont j'avais besoin sur la maquette et je les ai ajouté à la page. Une fois le HTML fini (en terme de contenu), j'y ai ajouté un fichier CSS. François m'avait montré la veille comment le faire depuis TYPO3, après quelques essais laborieux j'ai compris comment ça marchait et j'ai pu ajouter mon fichier CSS. J'ai également ajouté un script JavaScript pour faire une animation personnalisée sur la page. J'ai du me creuser un peu la tête pour faire fonctionner mon script correctemment mais j'ai réussi. J'ai terminé le reste de la journée, déjà bien avancée, à faire les premiers ajouts de CSS pour la mise en forme.

→ Semaine 1, jour 3
J'ai passé la journée à mettre en forme le header de la page (le menu en haut de celle-ci). J'ai commencé à ramer en CSS pour afficher le menu (problème de disposition des éléments), du coup j'ai voulu utiliser Bootstrap que nous avons utilisé à l'IUT mais je me suis vite rendu compte ce n'était pas adapté à un affichage très personnalisé, hors c'est le but du site. Finalement François m'a conseillé Bulma pour gérer la disposition. C'était exactement ce qu'il me fallait, j'ai passé un bon moment à me documenter, j'ai du refaire mon menu plusieurs fois pour que mon code utilise correctement les classes CSS Bulma adaptées. Une fois ça fait, j'ai même pu le rendre responsive (adapté pour les écrans de téléphone) en ajoutant juste quelques éléments expliqués dans la documentation. Malheureusement j'ai du désactiver une partie de mon CSS personnel car il ne fonctionnait plus à cause du nouveau fonctionnement. J'ai donc fini la journée sur un header fonctionnel et responsive mais dont le graphisme est entièrement à revoir (il faut y intégrer proprement le CSS que j'avais désactivé). J'ai fini la journée en commençant à faire ça. Ça a vraiment été une journée très intéressante, Bulma est vraiment très puissant et légé, il est certain que je vais m'en resserver pour le stage mais aussi pour mes projets personnels (en web évidemment).

→ Semaine 1, jour 4
Lorsque je suis arrivé le graphiste était là. Nous nous sommes rendu compte qu'il avait utilisé un thème pour le design du site. Il n'était donc pas nécessaire de faire l'intégration en partant de rien comme j'avais commencé. La boite s'est occupé d'acheter le thème (17$) pour que j'intègre directement le contenu du site dessus. L'ordinateur était vraiment lent, et vu qu'il était resté sous W7 et que le passage sous W10 est maintenant payant, mes collègues m'ont dit que je pouvais le passer sous Linux. Étant un linuxien dans l'âme, j'avais justement une clé d'installation d'Ubuntu sur moi (une distribution Linux). Je me suis donc chargé de l'installer. C'est allé assez vite. J'ai enfin pu profiter de la fluidité de l'ordinateur pour travailler confortablement. Ensuite j'ai récupéré les fichiers du thème et j'ai commencé juste ce dont j'avais besoin pour mon site sur le serveur. Ça a été très compliqué car il y avait pleins d'erreurs sur la page. Elle essayait de charger des fichiers qui n'étaient pas au bon endroit, ou d'utiliser des scripts non intégrés à TYPO3. J'ai dû modifier certains fichiers de configuration du thème avec l'aide de François. Une fois que les messages d'erreurs avaient disparus j'ai pu commencer à modifier la page. J'ai passé le reste de la journée à intégrer le code HTML que j'avais déjà fait au thème, en ajoutant un peu de CSS pour que l'affichage rende comme sur le modele.

→ Semaine 1, jour 5
Aujourd'hui j'ai terminé d'ajouter le contenu de la page. J'ai passé beaucoup de temps sur le CSS (en utilisant les classes bootstrap surtout) pour que tout soit comme sur la maquette. J'ai aussi beaucoup travaillé sur la version mobile du site, il faudra que je vois avec le graphiste si ça lui convient. J'ai eu beaucoup de mal à gérer certains éléments de l'affichage.

→ Semaine 2, jour 1
Nous avons eu la fameuse réunion du lundi matin 10h avec Hervé (PDG/Commercial), Fred (designer) et mes collègues développeurs. Il s'agissait de faire le point sur les projets en cours dont le site de Brochot dont je m'occupe. Ils en ont profité pour m'inscrire sur l'intranet dont je n'avais pas connaissance. Pour mon site nous attendons que le client valide le travail de Fred mais ça ne m'empêche pas de continuer (dans le pire des cas je dois juste mettre à jour quelques éléments, c'est très rapide). J'ai été ajouté au projet Brochot et je vais pouvoir y noter les heures passées. Cependant je ne m'en suis pas occupé aujourd'hui. Ensuite je me suis entretenu avec Fred pour le site. Il m'a donné la nouvelle version de la maquette du site, ainsi que la maquette au format Photoshop qui contient les fichiers sources. Il m'a également montré sur quelles pages de thème il avait prit les différentes parties de sa maquette pour que je les réutilise directement. Ça m'a été bien utile car j'ai pu beaucoup simplifier mon CSS (en réutilisant le code HTML des pages en question) tout en mettant à jour le contenu du site. La page principale est prèsque terminée, il reste le menu à terminer (ajustement de l'affichage) et je vais ajouter quelques effets d'animation et corriger les problèmes d'affichage (responsive / ajustement CSS). Je n'ai pas encore ajouté les images sources, il faut que je les récupère depuis Photoshop. J'ai passé quelques minutes dessus à regarder comment la maquette est faite mais je n'ai pas réussi à récupérer les images. Il faut que j'apprenne à le faire.

→ Semaine 2, jour 2
Je me suis connecté à l'intranet et j'ai entré mes heures de la semaine dernière sur le projet Brochot. J'ai fait beaucoup de correctifs d'affichage, j'ai complété mon script JS pour détecter quand l'utilisateur voit les chiffres du counter. J'ai passé un moment à rendre cette partie bien oppérationnelle sur grand écran comme sur téléphone. Ensuite j'ai récupéré les images sources depuis Photoshop, François m'a aidé. Puis j'ai enlevé toutes les anciennes images pour mettre les bonnes. J'ai pas mal travaillé sur le menu du point de vue responsive. Il ne me reste plus qu'un bug d'affichage à gérer pour la langue. Pour finir j'ai travaillé sur un effet de texte particulier : texte centré sur des images de façon à ce qu'il ai toujours la même taille par rapport à l'image, le soucis est que les images ont des effets d'animation et de placement qui empêchent d'utiliser le même système que pour les images statiques. Je voulais utiliser bootstrap mais je suis finalement revenu sur du CSS pur, j'ai réussi à le faire marcher juste avant de partir.

→ Semaine 2, jour 3
J'ai commencé par optimiser le script JS (suppression du listener une fois qu'il n'est plus utile). Ensuite j'ai terminé d'ajouter le texte sur les images, puis j'ai placé les icones de bouton sur la page (elles étaient nouvelles sur la dernière version de la maquette). Après j'ai corrigé l'affichage des trois photos en haut (border radius), j'ai passé un long moment à corriger tous les bugs du menu (couleur texte, couleur logo, affichage du menu sur plusieurs lignes en haut de la page, bug menu langue). J'ai appris comment faire des conditions plus poussées en CSS. J'ai corrigé quelques bugs d'affichage relatifs à Firefox (j'ai toujours travaillé sur Chrome mais certaines fonctionnalités n'existent pas sous Firefox, il faut alors utiliser un équivalent). Enfin j'ai eu un bug d'affichage sur téléphone, j'ai dû faire de nombreux testes pour trouver la source du problème. Une fois corrigé un nouveau bug est arrivé mais il ne sera pas long à régler.

→ Semaine 2, jour 4
J'ai commencé par régler le bug apparu hier soir. Ensuite ajouté la bordure autour de COLLECTIONS dans le menu (mise à jour de la maquette). Je l'ai adapté aux différents affichages du menu (en haut écran large, en haut écran téléphone, fixed écran large, fixed écran téléphone). J'ai ajouté la police décriture du graphiste (mais je ne l'ai pas encore attribuée). Puis j'ai passé un très long moment à corriger un bug de déclenchement du menu en fixed (bug présent dans le thème). Il a été très difficile de trouver où était la fonction responsable du déclanchement du fixed (dans le JS du thème), puis j'ai du refaire le système de déclanchement du menu en Javascript, c'était très complèxe car j'ai du faire un script asynchrone qui est lui-même éxecuté plusieurs fois en même temps. J'y ai bien passé 3 heures pour une quarantaine de lignes. Ensuite le graphiste m'a demandé de faire quelques ajustements (environ une heure de travail) puis François a pu m'aider à commencer la création du backend du site. En fait tout le code html/css/js... que j'ai crée sera associé avec l'interface de TYPO3 de façon à rendre le site dynamique, multilangue et administrable (en partie : modification de texte, image et lien) par le client. Chaque section de la page est associée avec un bloc dans le backend de TYPO3, et chaque page est une suite de blocs.

→ Semaine 2, jour 5
J'ai commencé la partie la plus difficile du projet : le lien avec le back-end. François a passé une bonne partie de la journée à m'apprendre le fonctionnement du back-end et à m'aider avec les erreurs. En fait il faut créer des éléments dans le back-end de TYPO3, et leur assigner une partie de mon code HTML (couper-coller). J'ai fait ça pour chaque section du body. Ensuite il faut regarder pour chaque élément ce que le client a besoin de pouvoir éditer. Puis on ajoute un champs pour chacune des parties modifiables (texte et photo essentiellement). Une complexité s'ajoute : lorsqu'un élément peut être ajouté plusieurs fois à la suite de la même façon. Il faut alors ajouter un groupe d'élément, puis expliquer ce que contient cet élément (côté back-end) et créer une boucle dans le code HTML côté front-end. J'ai eu beaucoup de mal au début puis j'ai commencé à comprendre le fonctionnement, heureusement car je serai tout seul le prochain jour de travail et il faut que je puisse avancer tout seul.

→ Semaine 3, jour 1
Journée très énervante : de gros soucis de connexion Internet toute la journée, il fallait compter plusieurs minutes pour faire ce qui met normalement quelques secondes (mise à jour d'une ou plusieurs lignes de code sur le serveur). J'ai continué l'intégration du frond-end dans le back-end de TYPO3 pour la home, c'est prèsque terminé. J'ai ajouté les bonnes polices d'écriture sur le serveur et je les ai intégré à la page. J'ai aussi fait quelques corrections d'affichage après avoir montré le site à Fred. Nous avons eu une réunion, pour Brochot nous sommes attendons que le client réponde. Nous avons aussi clarifié l'arborescence du site et j'ai proposé une solution de disposition du contenu (que j'ai vu dans le thème) pour les blocs de description des catégories de produits (sur les différentes pages du site) ainsi que pour afficher les commentaires des clients.

→ Semaine 3, jour 2
Toujours des problèmes Internet, j'ai utilisé le réseau de mon téléphone pour travailler. Le technicient a réparé le problème en partie en milieu d'après-midi. J'ai amélioré les DCE que j'ai ajouté à TYPO3 de façon à les rendre plus facilement réutilisables. Pour ça je les ai renomé en fonction de ce qu'ils affichent et j'ai ajouté des champs permettant de changer l'ID des sections générées. J'ai découvert un nouveau bug d'affichage sur le site que je me suis occupé de régler. J'ai également commencé la prochaine page du site, j'ai étudié les éléments du thème présents dans la maquette et j'ai commencé à créer les DCE correspondant aux différentes parties de la page. Un DCE est le nom de l'élément dans TYPO3 dans lequel je lui apprends à adapter un morceau de code avec différents éléments que je lui donne en entrée (exemple du texte, des images...).

→ Semaine 3, jour 3
ENCORE des problèmes avec Internet, j'ai utilisé mon téléphone le matin avant que ça soit réglé. J'ai commencé par réaliser la deuxième page du site, ça a été assez vite. Ensuite j'ai essayé de résoudre un problème avec le serveur web sur lequel on travail, Seb ne pouvait plus visionner son site sur Internet, je suis resté bloqué sur un message d'erreur que je n'ai pas su expliquer. En fait chaque fois que Seb essayait de consulter son site, il était redirigé sur le site de Brochot (car dans le dossier des sites web Brochot est le premier dans l'ordre alphabétique). Finalement c'est Seb qui a réussi à trouver la solution. Puis j'ai passé la journée à améliorer les DCE. Tel que c'était, il y avait un DCE par "section" de la page. C'est bien mais l'intérêt des DCE est d'être réutilisé. Chaque section est presque unique mais elle est composée de quelques éléments très simples : début de section, début de conteneur, fin de section, fin de conteneur, image en fond d'écran, image insérée à l'écran, titre, paragraphe, liste d'éléments centrés... Si on fait un DCE pour chacun de ces éléments, ils seront réutilisés plusieurs fois chacun et ainsi les possibilités du backend-layout de TYPO3 (les assemblages de DCE) sont beaucoup plus grandes. Pour atteindre cet objectif je procède en plusieurs étapes : je choisi le DCE que je vais intégrer (début des sections par exemple), puis je réfléchi aux champs qu'il doit avoir pour le DCE (id de la section et classes additionnelles), ensuite je crée le DCE, puis dans le constructeur de pages, pour chaque où on pourrait mettre le DCE, j'ajoute le DCE juste avant la partie, j'ouvre le code à remplacer par le DCE, je copie dans ce code les paramètres à donner au DCE et enfin je supprime le code. Ça prend dont un certain temps car il faut tout faire petit à petit.

→ Semaine 3, jour 4
J'ai un peu continué à refaire les DCE, il doit me rester encore un tiers du site qui est en transition. J'ai eu un nouveau projet à réaliser : mettre à jour un projet WordPress. Mon travail est de refaire l'affichage du menu (en CSS voire JS si besoin) sachant que je n'ai pas la possibilité de toucher au code HTML. J'ai une maquette Photoshop du résultat attendu. Il y avait l'une des section du menu qui devait être mise dans le footer du site. Le soucis est que le projet WordPress est un chantier totale, il y a des morceau du texte affiché de partout : dans des fichiers source, en BD et dans différentes extensions wp, dont certaines où le texte à modifier n'est visible nulle part. J'ai passé environ 2h à chercher le fameux texte, j'ai fouillé les fichiers source et la BD, impossible de trouver, même avec l'aide de Sébastien. Il en a conclu que c'était un bug d'affichage de l'extension. Finalement j'ai supprimé la partie du code qui appelait ce texte et je l'ai placé là où j'ai supprimé l'appel. En soit ce n'est pas propre mais vu le bordel du projet c'est la meilleure solution. Ensuite j'ai mis à jour les noms des sections du menu dans le backend de wp puis j'ai commencé à modifier l'affichage. Au début je me suis trompé de dossier : j'étais dans le dossier du site actuel et non dans le dossier preprod ! Heureusement je n'avais rien fait de grave et je m'en suis vite rendu compte. Le contenu est finalement bon mais j'ai à peine commencé son nouvel affichage : c'est beaucoup plus difficile de faire ça sans pouvoir modifier le code HTML, parfois il faut utiliser du JS pour le modifier car on ne peut pas faire autrement. Bilan de la journée : backend TYPO3, backend wp, HTML, CSS, JS, PHP, SQL, phpmyadmin. Les termes "stage développeur web full stack" prennent tout leur sens.

→ Semaine 4, jour 1
J'ai continué sur le projet wp. Vu que j'avais terminé les changements dans le back-end wp la dernière fois, j'ai pu me concentrer sur l'affichage du menu. Le nouveau menu est terminé, c'était très intéressant à faire car il faut ruser et il y avait beaucoup de contraintes. J'ai aussi passé un moment à gérer le responsive du menu qui laissait vraiment à désirer, voire était inexistant pour certaines dimensions. Enfin j'ai terminé cette partie en réglant un bug d'affichage du site. Une fois ça fait, j'ai fait un petit point avec Fred qui m'a rappelé que j'avais aussi l'affichage de certains éléments du site à modifier. En regardant la page dans le backend wp je me suis rendu compte qu'il s'agissait du même module qui posait problème la dernière fois, mais cette fois-ci j'ai trouvé l'éditeur de code dans l'interface wp. Ça confirme bien qu'il y a un bug avec la partie du footer. Je n'ai pas eu le temps de commencer les modifications mais je ne vais pas perdre de temps à la recherche du code.

→ Semaine 4, jour 2
J'ai passé la journée à modifier l'affichage de la section vidéo du site. Déjà j'ai du comprendre comment fonctionnait la création  de la page, puis j'ai commencé à la modifier afin de pouvoir modifier l'affichage... EXPLICATION : le backend de la page est composé de plusieurs blocs comme les DCE sur TYPO3. Chacun de ces blocs a un ou plusieurs champs à renseigner (on peut ne pas tous les remplir). Par exemple le champ "Vidéo" contenait un champ pour le code HTML de l'affichage de la vidéo (oui ce champ attend du code, qui contient une partie de sa mise en forme). Le deuxième champ contient aussi du code, il correspond à la description des activitées de ADVINÉO qui sont présentées dans la vidéo. Lui aussi contient une partie du code d'affichage. Maintenant comment ça marche une fois qu'on a rempli le backend ? Dans mon cas je travaillais sur une page de présentation de produit, il y en a plusieurs. Eh bien il y a un fichier php qui contient plein de morceau de HTML, séparés dans un case. Chaque morceau correspond à un bloc, et lors de lq génération de la page, pour chaque type de bloc wp va venir chercher ce code HTML, placer dans les parties prévues à cet effet les informations fournis dans le backend (du code html dans mon cas) et ainsi wp va petit à petit générer la page. Maintenant, qu'est-ce que je dois faire ? En soit je dois juste changer l'affichage des blocs vidéo. Le soucis c'est que actuellement, il y a un titre au dessus du bloc vidéo, la vidéo à gauche de sa section et sa description à droite en lignes. Ce que je dois obtenir c'est la vidéo au même endroit, son titre à droite (ainsi qu'un bouton), et sa description en colones en dessous. Le problèmes c'est que le code HTML généré ne permet pas cet affichage, en effet, il faut que le titre et la vidéo soient dans la même section, et ainsi dans le même bloc wp pour que je puisse les disposer comme je veux en modifiant le code PHP. J'ai donc modifié le bloc vidéo dans le backend wp, j'y ai ajouté un champ "titre". J'ai laissé le bloc titre qui était au dessus mais il n'était plus nécessaire. Ensuite j'ai fait un tour en PHP pour réunir le titre et la vidéo, et les séparer de la description. Une foit ça fait, il ne s'agit plus que de faire du CSS. J'ai passé le reste de la journée à me battre pour faire s'afficher le fond de la section de la vidéo en couleur, sans que ça déborde autoir de la vidéo. Elle était automatiquement redimentionnée en largeur sans que je puisse rien faire. J'ai fini par lui attribuer une dimention pour chacun des redimentionnements possibles, à la fin de la journée ça fonctionnait sur chrome version PC.

→ Semaine 4, jour 3
J'ai passé régulièrement quelques minutes à former le nouveau stagiaire commercial sur WordPress tout au long de la journée. J'ai commencé par continuer mon travail de l'avant veille sur les mises à jour d'affichage de Advinéo : j'en étais à la mise en forme de la description des vidéos. J'ai du modifier le code qui était dans le backend wp, celui dans le fichier PHP et pour finir j'ai ajouté du CSS. Ensuite je suis passé à la dernière partie du site à modifier (en théorie) : l'affichage des titres en H2 (enfin d'après Fred mais je pense qu'il ne sait pas à quel point ce projet est bordélique et le terme H2 n'a plus vraiment de sens). J'ai réussi à faire ça petit à petit. L'aventage était que je n'avais pas besoin de toucher au backend wp, j'ai juste un peu modifié le PHP et j'ai fait beaucoup de CSS. Ensuite j'ai voulu voir ce que mes modifications donnaient sur les autres pages : manque de chance, dans la section vidéo des autres pages, il y a juste une image. Du coup mon code fonctionne à moitier. J'ai donc modifié le bloc dans le backend wp, j'y ai ajouté un champ "image" puis j'ai pris ça en compte dans le fichier PHP. J'ai eu juste quelques modifications à faire en CSS et tout marchait nickel. Il me reste encore à mettre à jour les différents champs que j'ai modifié dans les blocs du backend wp, je dois faire les mêmes modifications sur les autres pages (normalement je ne devrais pas mais un mec a eu la brillante idée d'écrire du code dans un bloc wp sur plusieurs pages alors que c'est le même code -_-). J'ai surtout voulu finir ma journée en corrigeant définitivement mon problème d'affichage du fond de la section vidéo. Après pas mal de recherche sur la page de l'iframe j'ai finalement compris que la taille de la vidéo était de 100vw - les pixels de padding (à plus ou mois 15px). J'ai donc découvert que je pouvais faire des calculs en CSS avec la fonction calc(100vw - 56px...). Enfin, c'est la hauteur de la vidéo que je dois déterminer. J'ai donc utilisé les dimensions de la vidéo pour finalement obtenir "height: calc((100vw - 50px) * 412 / 548)". Horreur : sur téléphone le bug est toujours visible ! Mais après quelques tests je mesuis rendu compte que le "50px" est variable de 42 à 56px. En fait c'est le 42px qu'il fallait prendre pour que ça marche de partout :)

→ Semaine 4, jour 4
J'ai fini de mettre à jour les champs de la page dans le backend wp, j'ai fait quleques corrections d'affichage, puis je me suis attaqué à la version anglaise du site ! Elle est désastreuse :'( J'ai un peu galéré face au menu qu'il fallait refaire, puis j'ai juste copié mon CSS et j'ai ajouté anglais après BIP. Puis j'ai modifié l'ordre d'affichage dans le backend et finalement ça a suffit. Après j'ai cherché des pages où l'affichage du titre1 ne fonctionnait pas (car besoin de mise à jour backend ou PHP). J'en ai trouvé plusieurs mais impossible de trouver quelle partie de quel fichier était responsable des problèmes. Finalement j'ai pondu un petit script shell des familles pour chercher à ma place dans quels fichiers se trouvaient telles et telles lignes responsables du mauvais affichage (sur la console chrome on peut voir le code source, c'est lui que j'ai utilisé pour chercher). Ça a super bien marché, j'ai pu m'en resservir plusieurs fois pour trouver les fichiers PHP à mettre à jour. Pour finir j'ai fait afficher la totalité des pages et posts du site pour faire une liste des pages encore à problème. Il me reste notament une histoire de traduction à regénérer plus une page anglaise avec le footer français à corriger. Je vais enfin pouvoir repasser sur Brochot, on m'a transmit le nouveau contenu à ajouter dessus.

→ Semaine 5, jour 1
Petite réunion, tout ça tout ça... J'ai regardé avec mes collègues pour la traduction du site, ça semble tout bête : il y a un petit bouton sur les pages pour ajouter une version traduite de la page, mais rien à faire on ne trouve pas comment modifier les version traduites déjà existantes... Je commence donc à refaire une page à partir de la copie de sa version française puis je change sa langue en anglais. D'un coup, tout disparait et je comprend. En fait pour modifier les versions anglaises il faut aller sur le backend de la page, changer sa langue en français, publier, puis on peut accéder aux champs de création de la page ! Quelques heures de perdu pour si peu, mais il faut dire que c'est absolument contre-intuitif... Une heure après j'avais tout terminé et je pouvais enfin repasser sur Brochot ! Je me suis vite occupé de finir de remettre la page home dans son affichage normal : j'étais en transition avec les DCE, j'avais ajouté un nouveau DCE et je le plaçait dans le backend là où il devait servir, puis j'enlevais le code correspondant dans les anciens DCE (ceux qui ne sont pas réutilisables). J'ai continué à ajouter des DCE et j'ai pu complètement supprimer certains des anciens DCE. J'ai aussi trouvé un moyen de rassembler plusieurs balises dans une seule pour l'affichage des images centrées, ça va me permettre de créer un nouveau DCE pour les images centrées, voire peut-être pour tous les éléments centrés. Dès que j'ai terminé d'enlever les anciens DCE je m'occupe de faire les autres pages.

→ Semaine 5, jour 2
J'ai beaucoup avancé sur les DCE Brochot, j'ai récupéré le début du code pour générer automatiquement le menu par défaut, il faudra que je le modifie pour qu'il génère le menu statique que j'ai déjà réalisé. J'ai amélioré pleins de choses dans les DCE et j'en ai ajouté / fusionné quelques uns (tout ce qui est image(s) centré(s) avec ou sans texte et affichage de bouton(s) / lien(s)). J'ai pu encore enlever plusieurs anciens DCE, il n'en reste plus qu'un !

→ Semaine 5, jour 3
J'ai fait quelques modifications sur certains DCE, ils ont maintenant un champ "Nom du bloc" qui me permet de mettre un commentaire sur le contenu du bloc. Aussi j'ai paramétré ce champ pour qu'il soit visible sur les blocs dans la page de backend. Ça permet de rendre bien plus lisible le backend des pages. J'ai passé un moment à tous les commenter. J'ai voulu intégrer la deuxième page du site au backend typo3 mais rien ne s'affichait sur la page, François n'a pas trouvé le problème. Finalement j'ai réussi à corriger ça en testant des paramètres au pif mais il semblerait que je soit revenu au point de départ, c'est à n'y rien comprendre... J'ai eu besoin d'ajouter un nouveau DCE pour faire la page, tous les autres dont j'avais besoin étaient déjà là. L'ajout de la page a été assez rapide, il n'y avait pas beaucoup de blocs. Je vais maintenant passer au menu et au footer.

→ Semaine 5, jour 4
J'ai fait un point avec Sébastien sur le menu et le header pour savoir ce que le client doit pouvoir modifier et la façon dont gérer le multilangue. En fait une grosse partie n'est pas à rendre modifiable, c'est donc beaucoup plus pratique pour moi. Je devais juste gérer le multilangue avec des typolinks qui changent la langue de la page courante et je devais faire générer le menu automatiquement. J'ai commencé par griser le code du menu auto que j'avais récupéré. Puis j'ai déplacé le code du menu statique dans le fichier en question. Ensuite j'ai passé un bon moment à analyser le code grisé et à le remodeler pour qu'il prenne la place du code statique. J'ai dû utiliser les informations d'itération pour ruser (pour savoir quel était le dernier élément et y insérer le menu de langues statique juste avant). Le code généré était plein d'espaces et d'attributs HTML que je n'avais pas dans le code statique, difficile de les comparer. J'avais un problème d'affichage : le menu ne tenait plus sur 1 ligne. J'ai passé longtemps à analyser le code pour trouver le problème. Finalement c'était juste les espaces qui s'acumulaient. J'ai trouvé une balise fluid pour stopper ça et ça a réglé le problème ! Enfin je suis passé aux langues, j'ai galéré avec les typolinks car je voulais un lien sur la page courante qui prenne en paramètre la langue de la page. De cette façon, sur chaque page, le menu de langues redirige sur la même page avec la langue choisie. Après quelques essais j'ai trouvé la bonne balise. Enfin j'ai cherché un moyen d'obtenir la langue courante pour afficher "Fra" ou "Eng" en titre du menu de langues. Mes collègues m'ont aidé, finalement c'était tout bête. Une fois l'ID de la langue récupéré, j'ai juste fait une ligne de PHP et c'était bon. On m'a demandé d'afficher l'une des pages du site selon le modèle d'une des pages du thème. Je vais commencer par faire ça la prochaine fois

→ Semaine 6, jour 1
J'ai commencé par faire un tour sur le site, j'ai corrigé des erreurs de lien (en fait les typolinks d'hier n'étaient pas bons), certaines adresses de page ne fonctionnaient pas, il fallait mettre à jour les adresses dans le backend des pages. Aussi certains liens étaient en dur dans le code, je les ai donc remplacé par des typolinks. J'ai aussi découvert un bug d'affichage dans le menu sur Firefox. Je me suis occupé de le régler. Ensuite j'ai commencé à réaliser la page d'hier. Quelques blocs pour mettre un titre, une image centrée puis il me restait un paragraphe de texte mais nous avons eu une réunion. Bilan de la réunion : ne pas se focaliser sur les textes de Brochot car nous attendons encore leur retours, et je vais reprendre le projet d'Eye Take Care en attendant, j'ai demandé encore deux jours pour préparer les autres pages de Brochot car mon système de DCE marche un peu comme un page builder donc il faut réfléchir pour faire les pages. Ensuite j'ai continué sur la page, j'ai bloqué un moment sur une retouche de DCE, je voulais utiliser le DCE de titre pour afficher des paragraphes de texte mais impossible de le faire fonctionner. Finalement j'ai utilisé la taille de titre la plus basse (qui fait la taille du texte normal) et je lui ai donné la classe CSS "p" qui possède les attributs des balises "p", les balises de paragraphes. Après j'ai ajouté une autre page du site, vraiment très peu de contenu (en même temps Fred, dit le créatif, n'est pas là donc je fais comme je peux en attendant son retour^^). Pour finir j'ai fait un tour sur le thème et j'ai bien aimé l'affichage des posts. J'ai donc décidé de l'ajouter dans un DCE "Posts" car ça se porte bien pour la prochaine page que je vais ajouter. J'ai fini la journée par l'ajout des champs du DCE, il reste le code à écrire.

→ Semaine 6, jour 2
J'ai terminé de créer le DCE, finalement j'ai refait le code moi-même car le thème utilise du code JS et je ne sais pas pourquoi mais ça ne fonctionnait pas. En plus c'est plus optimisé de se paser de JS quand on peut. J'ai crée la page qui utilise ce DCE puis j'ai fait plein de petites corrections. Ensuite j'ai voulu réaliser la page de contact qui permet d'envoyer un mail à Brochot depuis leur site. Il s'agit d'une extension TYPO3 intégrée par défaut depuis la dernière version. La création du formulaire est super simple car c'est juste du drag'n drop mais ensuite j'ai ramé un moment pour que ça marche. Déjà il fallait inclure "form" dans le backend layout. Ensuite la fonction parseFunctTechtruc dans mon Public.html était mal configurée, j'ai dû remplacer `parseFunctTechtruc="machin"` par `parseFunctTechtruc="'machin_RE'"`. Il fallait le trouver celui-là ! Ensuite j'ai un peu testé les réglages pour tester le formulaire de contact puis j'ai fait une petite retouche d'affichage. Enfin j'ai fait un tour sur Advinéo et j'ai remarqué que dans le menu, l'un des liens n'allait pas sur la bonne page. J'ai passé quelques minutes à comprendre le problème (à quoi correspond la page...) pour finalement changer le lien `....truc-2` par `....truc` et fin.

→ Semaine 6, jour 3
Aujourd'hui 100 % Eye Tech Care et heureusement car il y a eu un gros soucis de serveur sur les autres sites, dont Advineo que j'avais touché hier. Alors je récupère un projet TYPO3 9.5 (même version que Brochot). Il s'agit du même genre de site que Brochot (présentation seulement). Sébastien a déjà réalisé l'arborescence des pages et intégré le menu dans TYPO3. Il y a aussi 95% du contenu de la home qui est là et ressemble à la maquette du site. Cependant, rien n'est responsive (ni le menu, ni le contenu, ni le footer). J'ai commencé par récupérer les images et textes dont j'avais besoin sur la maquette Photoshop et j'ai généré les JPEG de la home et de la page type du site. Ensuite j'ai grisé tout le code du contenu du site pour commencer par rendre le menu et le footer responsives. J'ai fait une grosse classification du code CSS (parties générale, header, content et footer). J'ai fait quelques ajouts de classes puis j'ai rapidement rendu le menu responsive. Ensuite le footer a été pareil. Cependant il est probable que je revienne dessus, Fred va probablement vouloir un burger. Pour finir j'ai dégrisé le premier gros bloc de contenu, qui contient un bloc gauche et un bloc droit. Le bloc droit contient un wrap d'images, alors sur une largeur fixe c'est super classe mais en pratique c'est une atrocité et je me suis battu pour que ça commence à être responsive. Il y avait plein de valeurs fixes en pixel que j'ai mises en pourcentage, puis j'ai fait des modifications pour que le wrap marche à peu près bien. Enfin j'ai ajouté un système de conteneur autour de chaque image pour avoir plus de flexibilité dans la gestion des images (conflits entre pourcentage et padding/margin...).

→ Semaine 6, jour 4
Programme de la journée : finir la section conteur et rendre responsive un maximum de contenu sur la home. Déjà j'ai terminé de rendre responsive la partie d'hier avec les images en wrap. Il y a un réglage pour chaque interval de dimensions : + de 1200px, entre 992 et 1199px, entre 768 et 991px, entre 576 et 768px et - de 576px (entre 575 et 300px environ). Fred m'a indiqué le comportement que devait avoir le bloc selon les tailles car c'est pour un effet de lien. Ensuite j'ai dégrisé le conteur du code (la section suivante). Elle était partiellement commencé : il y avait un conteur et il manquait le fond d'écran ainsi que le contenu. Le conteur ne marchait pas (erreur JS). J'ai trouvé le problème JS et je l'ai résolu (une importation de script js manquante). J'ai ajouté le contenu suivant le template du bloc du dessus, puis j'ai longuement cherché à mettre l'image en fond proprement. Ensuite j'ai bataillé le template du bloc pour qu'il soit comme sur la maquette et il me reste à modifier le conteur pour en faire un conteur.

→ Semaine 6, jour 5
J'ai commencé par travailler sur le code JS du conteur car à la base c'est un compte à rebours de 24h. Il a fallu déjà changer les noms de heure-minute-seconde en millions-milliers-centaines, puis pour chacun des trois j'ai dû ajouter un troisième chiffre. Ensuite il a fallu recoder le fonctionnement des chiffres : quand les centaines atteignent 1000, on les réinitialise à 0 et on ajoute 1 aux milliers, de même pour les milliers et les millions (sauf que pour les millions on n'ajoute rien). Ensuite il faut expliquer que pour chaque nombre, il faut afficher les 3 chiffres de la bonne manière. Il faut donc expliquer que en dessous de 10, les deux premiers chiffres de gauche sont à 0 et que le chiffre de droite est de la valeur du nombre ; que en dessous de 100, le premier chiffre est à 0, que le deuxième chiffre vaut le premier caractère du nombre et que le dernier chiffre vaut le dernier caractère du nombre ; et pour finir que au dessus de 100 le chiffre d'index i vaut le caractère d'index i du nombre.

→ Semaine 7, jour 1
J'ai cherché le problème du site de Brochot, en fait j'ai réalisé que cela venait du format de la police d'écriture qui était en ttf, j'ai alors téléchargé une version otf et ça a réglé tous les problèmes. Ensuite j'ai cherché à corriger un bug d'affichage du conteur de Eye Tech Care, une histoire à la con de 0.5px. Enfin j'ai ajouté la dernière section de la home qui n'était pas présente dans le fichier. J'ai mis beaucoup de temps à régler la mise en forme et ensuite le responsive. Il reste encore les icones à ajouter en haut des "cartes" et je devrais pouvoir commencer l'intégration TYPO3.

→ Semaine 7, jour 2
J'ai aidé à faire les migrations de serveurs : sur le serveur dédié d'OVH la base de donnée MySQL 5.6 est tombé, et plusieurs sites du serveur utilisaient cette BD donc ils ne fonctionnenent plus. Il y a un nouveau serveur sur lequel les fichiers des sites ont été transférés. Sur l'interface web du serveur Online il est possible de créer des BD et nous avons les sauvegardes des BD qui sont tombées. Mon travail a été de créer les BD sur Online, puis d'y importer la sauvegarde de la BD du site correspondant, puis enfin de mettre à jour la configuration du site pour qu'il se serve de la nouvelle BD.
Niveau ETC j'ai terminé la dernière section de la home. Il ne restait plus que le slider à faire pour le conteur et les 2 autres slides qui sont dessus. J'avais trouvé un slider super mais impossible de le faire marcher, en plus il utilisait une tonne de JS. Finalement j'ai décidé de faire le slider moi-même en HTML/CSS/JS. Toutes les transition (effets d'animation) sont faites en pure CSS, et le JS me permet de détecter qu'on clique sur les boutons de slide et de modifier les classes CSS des slides pour déclencher les animations. Au final j'ai très peu de JS mais le code est très efficasse.

→ Semaine 7, jour 3
Réalisation des classes CSS du slider et gestion de ces classes par le code JS. Quand on change de slide il faut déjà savoir si la nouvelle est en dessous ou au dessus de celle actuelle. Ensuite si la prochaine slide est en dessous, il faut la placer en dessous (avant d'activer les animations donc on se met en pause quelques ms), puis activer les animations sur la slide actuelle et sur la prochaine slide, puis activer la classe qui va déplacer la slide actuelle en l'air et en même temps activer la classe qui fait revenir du bas la slide suivante, puis il faut mettre le programme en pause 1s le temps que l'animation se termine, puis il faut cacher l'ancienne slide et il faut désactiver les animations sur les deux slides. De même en inversant le haut et le bas pour l'autre sens d'animation. Une fois fait j'ai ajouté le contenu de la 2em slide, j'ai passé un temps fou à intégrer ça car j'ai réutilisé un élément de la page que j'ai dû réadapter pour que tout fonctionne de partout, puis j'ai eu beaucoup de problèmes de taille car il y avait beaucoup de contenu et j'ai eu du mal à le rendre responsive. Enfin j'ai ajouté le contenu de la dernière slide (presque rien) puis j'ai géré le responsive des slides format téléphone. J'ai du gérer énormément de cas de taille, d'espacement... Et pour afficher les slides en téléphone je les mets simplement à la suite, ça encore ça m'a obligé à revoir pleins de gestions d'espacements entre les éléments... Pour finir j'ai commencé le système d'animation automatique des slides.

→ Semaine 7, jour 4
Beaucoup de temps passé à finir et corriger le programme d'animation des slides, j'ai dû me servir d'un mutex à n tickets pour gérer le défilement automatique. Je vais en faire mon point technique. Aussi j'ai ajouté un système pour stopper ce défilement lorsque la souris se trouve au dessus d'une slide. J'ai utilisé quelques lignes de jQuery pour ça. Enfin j'ai commencé à créer le système de burger pour le menu, c'est absolument horrible à faire. J'ai crée des images vectorielles pour le burger et la croix en html css. Il faut que je trouve les transitions à faire.

→ Semaine 7, jour 5
Essentiellement la mise en place du menu pour téléphone, ajout de toute l'arborescence des pages du site, affichage du menu et des sous-menus en mode desktop, début de l'affichage des sous-menus en mode téléphone. Gestion des animations : apparition / disparition du menu téléphone, de même avec ses sous-menus, apparition / disparition des sous-menus en mode desktop, hover sur les éléments des sous-menus.

→ Semaine 8, jour 1
Un peu de temps passé sur le menu mobile sans aller trop dans le détail car je préfère faire un point avec Fred pour ça. J'ai eu une grosse réunion à cause de ces temps de crise donc je n'ai pas passé toute ma journée à développer. J'ai crée les premiers DCE d'ETC. C'est bien parce que je n'ai pas tout un thème à lui apprendre, il y a juste quelques élément et je vais beaucoup plus vite que sur Brochot car je sais déjà comment structurer un site avec ce système (typoscript, et je réutilise mon code : ajout de fin de conteneur, titre DCE...). Enfin j'ai travaillé sur l'animation que voulait Fred sur plusieurs photos qui doivent arriver en sacadé. François m'a donné un bon site avec ce genre d'effet (en fait ça ne porte pas du tout un nom logique). Fred a 100% validé, juste ça ne se lançait pas au scroll. J'ai donc modifié le code pour que ça marche mais j'ai tout planté !

→ Semaine 8, jour 2
Correction du programme de détection au scroll, création de tous les DCE nécessaire pour terminer la home puis j'ai commencé à la créer. Plusieurs bugs qui ont prit du temps à résoudre. J'ai décidé de traiter les slides du slider en dernier car c'est la partie la plus complexe. Du coup je corrige petit à petit les DCE pendant que je construit la page.

→ Semaine 8, jour 3
Journée entièrement passée à finir l'intégration typo3 de la home (du slider et ses slides). Pleins de petits ajustements DCE, JS, CSS et HTML pour pouvoir rendre cohérentes toutes les différentes utilisations des mêmes DCE dans sur les page et dans les slides.

→ Semaine 8, jour 4
J'ai beaucoup avancé sur la page interne du site, donc ajout de nouvelles options dans les DCE au fur et à mesure des besoins, je ne crois pas avoir eu besoin d'ajouter un nouveau DCE. Aussi j'ai appris que comme pour Brochot il y avait un thème pour le site, c'est dommage d'avoir appri ça aussi tard quand même -_- C'est trop tard pour une bonne partie du template (slider, counter, disposition sans bootstrap, animations faites à la main...) mais j'avais volontairement laissé certains détails de côté comme les boutons qui font descendre la page ou ceux qui la font remonter, ainsi que l'affichage final du menu téléphone. Je vais donc pouvoir les récupérer sur le thème.

******************************** Autres notes ********************************

https://api-platform.com/ en lien avec https://schema.org/Event pour générer automatiquement un model bd

Thème OKNO
http://themes.suelo.pl/okno/index-multipage-classic-2.html

TYPO3
https://docs.typo3.org/
https://wiki.typo3.org/Fluid
https://fluidtypo3.org/
https://typo3buddy.com/home/
https://www.nitsan.in/blog/post/30-tips-tricks-for-optimum-typo3-website-speed-and-performance/

Gestion des images
https://developer.mozilla.org/fr/docs/Web/CSS/object-fit
https://la-cascade.io/utiliser-css-object-fit/
https://www.w3schools.com/css/css3_object-fit.asp
https://www.alsacreations.com/xmedia/tuto/html5/srcset/srcset-image-responsive.html

Slider
http://kenwheeler.github.io/slick/

Staggering
https://css-tricks.com/staggering-animations/

Codepen de François
https://codepen.io/fchaussin/pens/popular/

Normes Google pour l'affichage et les animations d'un site
https://material.io/design/shape/about-shape.html

Site avec système propre de chargement dynamique des dépendances
https://efooder.w23.fr/

Très bons petits Frameworks PHP
https://framework.zend.com/
https://www.codeigniter.com/

De même en JS
https://requirejs.org/docs/start.html
https://lab.js.org/

API
https://restfulapi.net/
https://openclassrooms.com/fr/courses/3449001-utilisez-des-api-rest-dans-vos-projets-web/3501901-pourquoi-rest
https://graphql.org/

Retouches basiques d'images :
https://www.xnview.com/fr/

Super animation de burger
https://www.agirc-arrco.fr/
https://codepen.io/designcouch/pen/Atyop
